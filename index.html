<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hair Artist Styling Studio | Fabiola Villegas</title>

  <!-- Tipografías -->
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">

  <!-- Tu hoja de estilos base -->
  <link rel="stylesheet" href="estilo.css">

  <!-- Estilos mínimos del carrusel (compacto) -->
  <style>
    body{ font-family:Lato,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:#252525;}
    h2,h3,h4{ font-family:"Playfair Display",serif;}
    .card{ background:#F7F4EE; border-radius:16px; padding:14px; box-shadow:0 8px 20px rgba(0,0,0,.06);}
    .muted{ color:#656565;} .small{ font-size:.95rem;}
    .pill{ display:inline-block; padding:.35rem .75rem; border-radius:999px; background:#EEE6D9; color:#444; font-weight:600; font-size:.9rem;}

    .header-surface{ position:relative; margin:16px auto 8px; padding:28px 16px; border-radius:28px; max-width:1100px; overflow:hidden; box-shadow:0 10px 24px rgba(0,0,0,.06);
      background-image:linear-gradient(135deg,#F3E9DB 0%, #EEE5D8 55%, #E7DFD2 100%), url('activos/header-bg.jpg');
      background-size:cover,cover; background-position:center,center; background-blend-mode:multiply;}
    .brand{ display:flex; flex-direction:column; align-items:center; gap:10px;}
    .logo img{ max-height:200px; height:auto; width:auto; display:block; margin:0 auto; filter:drop-shadow(0 2px 6px rgba(0,0,0,.08));}

    .hero{ display:grid; gap:16px; grid-template-columns:1fr;}
    @media (min-width:768px){ .hero{ grid-template-columns:1.6fr 1fr;} }

    /* Carrusel */
    #gallery{ margin-top:18px;}
    .carousel{ position:relative; border-radius:16px; background:#F7F4EE; padding:10px 56px 70px; box-shadow:0 8px 20px rgba(0,0,0,.06);}
    .c-viewport{ position:relative; height:clamp(280px,45vh,420px); overflow:hidden; border-radius:12px; background:#EEE6D9; display:grid; place-items:center;}
    .viewer{ max-width:100%; max-height:100%; object-fit:contain; display:block; opacity:0; transition:opacity .25s ease;}
    .viewer.is-ready{ opacity:1;}

    .c-nav{ position:absolute; top:50%; transform:translateY(-50%); width:40px; height:40px; border-radius:999px; border:1px solid #D6D1C4; background:#fff; color:#5a5a5a; display:grid; place-items:center; font-size:22px; cursor:pointer; box-shadow:0 4px 12px rgba(0,0,0,.08); user-select:none;}
    .c-prev{ left:8px;} .c-next{ right:8px;}

    .c-thumbs{ position:absolute; left:0; right:0; bottom:8px; display:flex; gap:8px; justify-content:center; padding:0 12px; overflow-x:auto; scrollbar-width:none;}
    .c-thumbs::-webkit-scrollbar{ display:none;}
    .c-thumb{ width:60px; height:44px; border:2px solid transparent; border-radius:8px; overflow:hidden; background:transparent; cursor:pointer; box-shadow:0 2px 6px rgba(0,0,0,.08); padding:0; flex:0 0 auto;}
    .c-thumb img{ width:100%; height:100%; object-fit:cover; display:block;}
    .c-thumb.is-active{ border-color:#C9C2B2;}
    @media (max-width:680px){ .carousel{ padding:8px 48px 76px;} .c-thumb{ width:52px; height:38px;} }

    /* Lateral + footer (igual que antes) */
    @media (min-width:980px){
      .side-gap-photo{ height:360px; border-radius:16px; overflow:hidden; margin:12px 0; box-shadow:0 8px 20px rgba(0,0,0,.06);}
      .side-gap-photo img{ width:100%; height:100%; object-fit:cover; object-position:center;}
    }
    @media (max-width:979px){ .side-gap-photo{ display:none;} }
    footer{ text-align:center; padding:14px 0; color:#444;}
    .card.center{ display:flex; flex-direction:column; gap:8px;}
    .card.center .map-embed{ order:-1;}
  </style>
</head>

<body>
  <div class="wrap">
    <!-- ===== HEADER ===== -->
    <header class="site-header">
      <div class="header-surface">
        <div class="brand">
          <div class="logo">
            <img src="activos/logo.svg" alt="Logo de Fabiola Villegas" loading="lazy">
          </div>
          <div class="brand-text"><div class="subtitle"></div></div>
        </div>
      </div>
    </header>

    <!-- ===== CONTENIDO (resumido para focar en la galería) ===== -->
    <main>
      <!-- … tu contenido anterior (servicios, texto, mapa) se mantiene igual … -->

      <!-- Galería / Carrusel -->
      <section id="gallery">
        <h3 style="margin:0 0 12px 0">Galería</h3>

        <div class="carousel" data-carousel>
          <button class="c-nav c-prev" aria-label="Anterior">‹</button>

          <div class="c-viewport">
            <!-- Un solo visor; el JS cambia su src -->
            <img id="viewer" class="viewer" alt="Foto" decoding="async" />
          </div>

          <button class="c-nav c-next" aria-label="Siguiente">›</button>
          <div class="c-thumbs" id="thumbs"></div>
        </div>
      </section>
    </main>

    <!-- CTA -->
    <section id="cta-final" class="py-10">
      <div class="text-center">
        <div class="cta-row">
          <a href="https://wa.me/525561117810?text=Hola%2C%20me%20gustar%C3%ADa%20agendar%20una%20cita.%20%C2%BFTienen%20disponibilidad%20esta%20semana%3F" target="_blank" rel="noopener" class="cta-btn cta-wa">WhatsApp</a>
          <a href="https://instagram.com/faby_ville28" target="_blank" rel="noopener" class="cta-btn cta-ig">Instagram</a>
        </div>
      </div>
    </section>

    <footer>
      <div style="margin-bottom:8px">Espacio seguro y respetuoso • Todos son bienvenidos</div>
      <div class="small muted">© <span id="year"></span> Hair Artist Styling Studio • Fabiola Villegas</div>
    </footer>
  </div>

  <!-- GALERÍA: autodetección gal1..gal60 (.jpg/.png/.webp), carga bajo demanda -->
  <script>
    (function(){
      const MAX = 60;
      const base = 'activos/';
      const names = Array.from({length: MAX}, (_,i)=> 'gal'+(i+1));
      const tryExts = ['.jpg','.png','.webp'];

      const viewer = document.getElementById('viewer');
      const thumbs = document.getElementById('thumbs');

      function probe(url){
        return new Promise(res=>{
          const im = new Image();
          im.onload  = ()=> res(url);
          im.onerror = ()=> res(null);
          im.src = url;
        });
      }
      async function firstExisting(name){
        for(const ext of tryExts){
          const u = base + name + ext;
          const ok = await probe(u);
          if(ok) return ok;
        }
        return null;
      }

      // Pre-carga liviana (solo la siguiente)
      function preloadNext(list, idx){
        const n = (idx+1) % list.length;
        const img = new Image();
        img.src = list[n];
      }

      (async function init(){
        // Recolectar solo las que existen
        const urls = [];
        for(const name of names){
          const u = await firstExisting(name);
          if(u) urls.push(u);
        }
        if(urls.length === 0){
          viewer.alt = 'Sin imágenes disponibles';
          return;
        }

        // Construir miniaturas
        urls.forEach((src, i)=>{
          const b = document.createElement('button');
          b.className = 'c-thumb' + (i===0 ? ' is-active':'');
          const t = document.createElement('img');
          t.src = src; t.alt = '';
          t.loading = 'lazy';
          b.appendChild(t);
          b.addEventListener('click', ()=> show(i));
          thumbs.appendChild(b);
        });

        let idx = 0;

        function show(n){
          idx = (n + urls.length) % urls.length;
          // desactivar transición para evitar parpadeo entre src
          viewer.classList.remove('is-ready');
          viewer.onload = ()=> viewer.classList.add('is-ready');
          viewer.src = urls[idx];
          // marcar thumb
          Array.from(thumbs.children).forEach((el, j)=> el.classList.toggle('is-active', j===idx));
          // precargar la siguiente
          preloadNext(urls, idx);
        }

        // Botones
        document.querySelector('.c-prev').addEventListener('click', ()=> show(idx-1));
        document.querySelector('.c-next').addEventListener('click', ()=> show(idx+1));
        document.addEventListener('keydown', (e)=>{
          if(e.key === 'ArrowLeft')  show(idx-1);
          if(e.key === 'ArrowRight') show(idx+1);
        });

        // Primer render
        show(0);
      })();
    })();
  </script>

  <!-- Año dinámico -->
  <script>document.getElementById('year').textContent = new Date().getFullYear();</script>
</body>
</html>
